{% extends "base.html" %}
{% from "_formhelpers.html" import render_field %}
{% from "schedule/_faves.html" import favourite_icons %}
{% from "schedule/_proposal_icons.html" import proposal_icons %}
{% block title %}Workshop Tickets{% endblock %}
{% block body %}

<h2>Your current workshop tickets</h2>

<noscript>
  This page requires Javascript, sorry.
</noscript>

<p>
  You can drag & drop your tickets in order of preference with top being your
  highest preference and the bottom being your lowest.
</p>

<form method="POST">
  {{ form.hidden_tag() }}
  <div id="event-tickets" class="list-group">
    {% for t in form.tickets %}
     {# FIXME add how many tickets are per ticket & sort by status #}
      <div class="list-group-item panel draggable-panel" data-id="{{ t.id }}">
        {{ t.ticket_id() }}
        {{ t._ticket.proposal.title }}
        ({{ t._ticket.ticket_count }} -- {{ t._ticket.state }})
        {% if t._ticket.state != "cancelled" %}
          {{ t.cancel(_class="pull-right")}}
        {% endif %}
      </div>
    {% endfor %}
  </div>
</form>


{% endblock %}

{% block foot %}
  <script type="text/javascript" src="{{static_url_for('static', filename="js/event-tickets.js")}}"></script>
{% endblock -%}
