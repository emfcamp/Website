{% from "_formhelpers.html" import render_field %}
{% extends "base.html" %}
{% block title %}Villages{% endblock %}
{% block body %}
<h2>Villages</h2>
<p>For more information on villages, see the <a href="{{ url_for('base.page', page_name='villages') }}">villages page</a>.
{% if current_user.is_authenticated %}
  {% if current_user.village %}
    You're a member of the <strong><a href="{{url_for('villages.view', year=event_year, village_id=current_user.village.id)}}">{{current_user.village.name}}</a></strong> village.
  {% else %}
    If you want to create a village, you can
    <a href="{{url_for('.register')}}">register it here</a>.
  {% endif %}
{% else %}
If you have a ticket, you can <a href="{{url_for('users.login', next=url_for('.register'))}}">log in to register a village</a>.
{% endif %}
</p>
<h3>List of Villages</h3>
<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      {% if any_village_located %}<th></th>{% endif %}
    </tr>
  </thead>
  <tbody>
  {% for village in villages %}
    <tr>
      <td><a href="{{ url_for('villages.view', year=event_year, village_id=village.id) }}">{{village.name}}</a></td>
      <td style="overflow-wrap: anywhere">{{village.description}}</td>
      {% if any_village_located %}
      <td style="width: 1px; white-space: nowrap;">
        {% if village.map_link %}
          <a href="{{ village.map_link }}">üìç&nbsp;Map</a>
        {% endif %}
      </td>
      {% endif %}
      
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
